{% liquid
  assign animation_duration = section.settings.animation_duration | default: 30
  assign background_color = section.settings.background_color | default: '#f5f5f5'
  assign text_color = section.settings.text_color | default: '#333333'
  assign icon_color = section.settings.icon_color | default: '#666666'
%}

<section class="running-line" style="--background-color: {{ background_color }}; --text-color: {{ text_color }}; --icon-color: {{ icon_color }}; --animation-duration: {{ animation_duration }}s;">
  <div class="running-line__track">
    <div class="running-line__content">
      {% for block in section.blocks %}
        <div class="running-line__item" {{ block.shopify_attributes }}>
          {% if block.settings.icon_svg != blank %}
            <span class="running-line__icon">{{ block.settings.icon_svg }}</span>
          {% endif %}
          {% if block.settings.title %}
            <span class="running-line__title">{{ block.settings.title }}</span>
          {% endif %}
          {% if block.settings.description %}
            <span class="running-line__description">{{ block.settings.description }}</span>
          {% endif %}
        </div>
      {% endfor %}
      
      {% comment %} Duplicate content for seamless loop {% endcomment %}
      {% for block in section.blocks %}
        <div class="running-line__item" aria-hidden="true">
          {% if block.settings.icon_svg != blank %}
            <span class="running-line__icon">{{ block.settings.icon_svg }}</span>
          {% endif %}
          {% if block.settings.title %}
            <span class="running-line__title">{{ block.settings.title }}</span>
          {% endif %}
          {% if block.settings.description %}
            <span class="running-line__description">{{ block.settings.description }}</span>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% stylesheet %}
  .running-line {
    background-color: var(--background-color);
    color: var(--text-color);
    overflow: hidden;
    white-space: nowrap;
    padding: 12px 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .running-line__track {
    width: 100%;
    overflow: hidden;
  }

  .running-line__content {
    display: inline-flex;
    align-items: center;
    animation: scroll-left var(--animation-duration) linear infinite;
    gap: 60px;
  }

  .running-line__item {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
    white-space: nowrap;
  }

  .running-line__icon {
    color: var(--icon-color);
    font-size: 16px;
    line-height: 1;
    display: inline-flex;
    align-items: center;
  }

  .running-line__icon svg {
    width: 16px;
    height: 16px;
    fill: currentColor;
  }

  .running-line__title {
    font-weight: 600;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .running-line__description {
    font-size: 14px;
    opacity: 0.8;
  }

  @keyframes scroll-left {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  @media screen and (max-width: 767px) {
    .running-line {
      padding: 10px 0;
    }
    
    .running-line__content {
      gap: 40px;
    }
    
    .running-line__title,
    .running-line__description {
      font-size: 13px;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Running Line",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "range",
      "id": "animation_duration",
      "min": 10,
      "max": 60,
      "step": 5,
      "unit": "s",
      "label": "Animation speed",
      "default": 30
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background",
      "default": "#f5f5f5"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icons",
      "default": "#666666"
    }
  ],
  "blocks": [
    {
      "type": "message",
      "name": "Message",
      "settings": [
        {
          "type": "html",
          "id": "icon_svg",
          "label": "Icon SVG",
          "info": "Paste SVG code here",
          "default": "<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/></svg>"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "FREE SHIPPING"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Description",
          "default": "On all orders over $99"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Running Line",
      "blocks": [
        {
          "type": "message",
          "settings": {
            "icon_svg": "<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/></svg>",
            "title": "HAPPY CUSTOMERS",
            "description": "Over 15000+ satisfied customers"
          }
        },
        {
          "type": "message",
          "settings": {
            "icon_svg": "<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z' fill='currentColor'/></svg>",
            "title": "BEST PRICES",
            "description": "Denmark's cheapest GelGuns"
          }
        },
        {
          "type": "message",
          "settings": {
            "icon_svg": "<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M21 16v-2a4 4 0 00-4-4V8a6 6 0 10-12 0v2a4 4 0 00-4 4v2a2 2 0 002 2h1a2 2 0 002-2v-1h12v1a2 2 0 002 2h1a2 2 0 002-2z' fill='currentColor'/></svg>",
            "title": "FREE SHIPPING",
            "description": "On all orders over $99"
          }
        },
        {
          "type": "message",
          "settings": {
            "icon_svg": "<svg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z' fill='currentColor'/><circle cx='12' cy='10' r='3' fill='white'/></svg>",
            "title": "EU DELIVERY",
            "description": "We deliver across Europe"
          }
        }
      ]
    }
  ]
}
{% endschema %}